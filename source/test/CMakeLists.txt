SET (TEST_NAME octave-ir)
SET (SOURCE_FILES main.cpp)

SET (TARGET_VERSIONS 17 20)

GET_PROPERTY (OCTAVE_IR_LIBS GLOBAL PROPERTY OCTAVE_IR_LIBS)
LIST (APPEND OCTAVE_IR_LINK_LIBS ${OCTAVE_IR_LIBS})

FOREACH (version ${TARGET_VERSIONS})
  SET (target_name ${TEST_NAME}.test.c++${version})
  ADD_EXECUTABLE (${target_name} ${SOURCE_FILES})

  TARGET_COMPILE_OPTIONS (${target_name} PRIVATE ${OCTAVE_IR_COMPILE_OPTS})
  TARGET_LINK_OPTIONS    (${target_name} PRIVATE ${OCTAVE_IR_LINK_OPTS})
  TARGET_LINK_LIBRARIES  (${target_name} PRIVATE ${OCTAVE_IR_LINK_LIBS})

  SET_TARGET_PROPERTIES (${target_name}
                         PROPERTIES CXX_STANDARD          ${version}
                                    CXX_STANDARD_REQUIRED NO
                                    CXX_EXTENSIONS        NO)
ENDFOREACH ()

ADD_SUBDIRECTORY (scratch)
ADD_SUBDIRECTORY (doctest)
